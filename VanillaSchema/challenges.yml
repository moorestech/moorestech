# NOTE このyamlに記述されているスキーマのコード、JSONローダーはSourceGeneratorによって自動生成されます。そのため、このスキーマのクラスやローダーを実装する必要はありません。
# NOTE The schema code and JSON loader described in this YAML are automatically generated by the SourceGenerator. Therefore, you do not need to implement the classes or loaders for this schema.

id: challenges
type: object
isDefaultOpen: true
properties:
- key: data
  type: array
  openedByDefault: true
  overrideCodeGeneratePropertyName: ChallengeCategoryMasterElement
  items:
    type: object
    properties:
    - key: categoryGuid
      type: uuid
      autoGenerated: true
    - key: categoryName
      type: string
      default: New Category
    - key: categoryDescription
      type: string
      default: Category description
    - key: displayOrder
      type: integer
      default: 100
      autoIncrement:
        direction: asc
        step: 10
        startWith: 100
    - key: IconItem
      type: uuid
      foreignKey:
        schemaId: items
        foreignKeyIdPath: /data/[*]/itemGuid
        displayElementPath: /data/[*]/name
    - key: initialUnlocked
      type: boolean
      default: false
    - key: challenges
      type: array
      openedByDefault: true
      overrideCodeGeneratePropertyName: ChallengeMasterElement
      items:
        type: object
        properties:
        - key: challengeGuid
          type: uuid
          autoGenerated: true
        - key: unlockAllPreviousChallengeComplete
          type: boolean
          default: true
          $memo: 前のチャレンジが全て完了になったらアンロックするか
        - key: prevChallengeGuids
          type: array
          optional: true
          isDefaultOpen: true
          items:
            type: uuid
            foreignKey:
              schemaId: challenges
              foreignKeyIdPath: /data/[*]/challenges/[*]/challengeGuid
              displayElementPath: /data/[*]/challenges/[*]/title
        - key: title
          type: string
          default: New Challenge
        - key: summary
          type: string
          default: New Challenge summary
        - key: taskCompletionType
          type: enum
          default: createItem
          options:
          - createItem
          - inInventoryItem
          - blockPlace
        - key: taskParam
          isDefaultOpen: true
          switch: ./taskCompletionType
          cases:
          - when: createItem
            type: object
            properties:
            - key: itemGuid
              type: uuid
              foreignKey:
                schemaId: items
                foreignKeyIdPath: /data/[*]/itemGuid
                displayElementPath: /data/[*]/name
          - when: inInventoryItem
            type: object
            properties:
            - key: itemGuid
              type: uuid
              foreignKey:
                schemaId: items
                foreignKeyIdPath: /data/[*]/itemGuid
                displayElementPath: /data/[*]/name
            - key: itemCount
              type: integer
              default: 1
          - when: blockPlace
            type: object
            properties:
            - key: blockGuid
              type: uuid
              foreignKey:
                schemaId: blocks
                foreignKeyIdPath: /data/[*]/blockGuid
                displayElementPath: /data/[*]/name
            - key: itemCount
              type: integer
              default: 1
        - key: tutorials
          type: array
          isDefaultOpen: true
          items:
            type: object
            properties:
            - key: tutorialType
              type: enum
              default: uiHighLight
              options:
              - mapObjectPin
              - keyControl
              - uiHighLight
              - itemViewHighLight
            - key: tutorialParam
              switch: ./tutorialType
              cases:
              - when: mapObjectPin
                type: object
                properties:
                - key: mapObjectGuid
                  type: uuid
                  foreignKey:
                    schemaId: mapObjects
                    foreignKeyIdPath: /data/[*]/mapObjectGuid
                    displayElementPath: /data/[*]/mapObjectName
                - key: pinText
                  type: string
                  default: pin text
              - when: keyControl
                type: object
                properties:
                - key: uiState
                  type: enum
                  options:
                  - GameScreen
                  - PlayerInventory
                  - BlockInventory
                  - PauseMenu
                  - DeleteBar
                  - Story
                  - PlaceBlock
                  default: GameScreen
                - key: controlText
                  type: string
                  default: control text
              - when: uiHighLight
                type: object
                properties:
                - key: highLightUIObjectId
                  type: string
                  default: ui object id
                - key: highLightText
                  type: string
                  default: highlight text
              - when: itemViewHighLight
                type: object
                properties:
                - key: highLightItemGuid
                  type: uuid
                  foreignKey:
                    schemaId: items
                    foreignKeyIdPath: /data/[*]/itemGuid
                    displayElementPath: /data/[*]/name
                - key: highLightText
                  type: string
                  default: highlight text
        - key: startedActions
          ref: challengeAction
        - key: clearedActions
          ref: challengeAction
        - key: displayListParam
          ref: graphViewSettings
