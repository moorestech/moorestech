# YAML Schema Specification

## Property Reference

| Property | Description | Type | Editor | CodeGen |
|----------|-------------|------|--------|---------|
| id | Schema identifier | string | Yes | Yes |
| key | Element name | string | Yes | Yes |
| type | Element type | string | Yes | Yes |
| properties | Child elements for object type | object[] | Yes | Yes |
| items | Element type for array | object | Yes | Yes |
| autoGenerated | Auto-generate UUID (uuid only) | boolean | Yes | - |
| foreignKey | Foreign key reference | object | Yes | Yes |
| optional | Allow null/omit | boolean | Yes | Yes |
| default | Default value in editor | varies | Yes | - |
| enum | Limit string values | string[] | Yes | Yes |
| ref | Import another schema | string | Yes | Yes |
| switch | Path for conditional schema | string | Yes | Yes |
| cases | Conditional schema definitions | object[] | Yes | Yes |
| when | Condition value in case | varies | Yes | Yes |
| isDefaultOpen | Expand by default | boolean | Yes | - |
| fixedParameter | Fix path element to value | object | Yes | - |
| overrideCodeGeneratePropertyName | Override property/class name | string | - | Yes |
| defineInterface | Define interface (root only) | object[] | Yes | Yes |
| interfaceName | Interface name (in defineInterface) | string | Yes | Yes |
| implementationInterface | Implement interfaces | string[] | Yes | Yes |

## Type Values

`array`, `object`, `string`, `number`, `integer`, `boolean`, `uuid`, `enum`, `vector2`, `vector3`, `vector4`, `vector2Int`, `vector3Int`, `vector4Int`

## foreignKey Structure

```yaml
foreignKey:
  schemaId: items                    # Target schema id
  foreignKeyIdPath: /data/[*]/itemGuid    # Path to ID
  displayElementPath: /data/[*]/name      # Path to display name
```

## Path Specification

- Absolute: `/data/property/child`
- Relative: `./sibling` or `../parent/sibling`

## csc.rsp Configuration

Location: `moorestech_server/Assets/Scripts/Core.Master/csc.rsp`

Format:
```
/additionalfile:Assets/../../VanillaSchema/schemaName.yml
```

This file tells SourceGenerator which YAML files to process.

- **Add schema**: Add new line with path
- **Delete schema**: Remove corresponding line

Both operations require csc.rsp update.

## SourceGenerator Trigger

Location: `moorestech_server/Assets/Scripts/Core.Master/_CompileRequester.cs`

Modify `dummyText` to trigger recompilation:
```csharp
private const string dummyText = "any-new-value";
```

Commit this file along with schema changes.
