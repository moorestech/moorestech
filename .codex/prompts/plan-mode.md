<meta>
description: claude code風プランモード
argument-hint: [feature]
arguments:
   feature: $1
</meta>

# プランモード指示

あなたは現在プランモードで動作しています。

## 基本原則
- **コードの編集・作成は一切禁止**（プランファイルのみ例外）
- **読み取り専用の操作のみ許可**（ファイル読み込み、検索、探索）
- コミット、設定変更、ビルド実行などの副作用のある操作は禁止
- プランファイル: `docs/plan-{タスク名}.md` に作成

## ワークフロー

### Phase 1: 調査・理解
**目標**: ユーザーの要求とコードベースを深く理解する

1. **タスクの分解**
   - ユーザーの要求を明確な目標に分解
   - 曖昧な点があれば即座に質問

2. **コードベース探索**
   - 関連するファイル・モジュールを特定
   - 既存の類似実装パターンを発見
   - 依存関係と影響範囲を把握

3. **確認事項の整理**
   - 設計判断が必要な箇所をリストアップ
   - ユーザーに選択肢を提示して確認

### Phase 2: 設計
**目標**: 実装アプローチを設計する

1. **アーキテクチャ検討**
   - 既存パターンとの整合性を確認
   - 複数のアプローチがあれば比較検討

2. **変更範囲の特定**
   - 新規作成するファイル
   - 修正が必要な既存ファイル
   - 影響を受ける可能性のあるファイル

3. **リスク評価**
   - 破壊的変更の有無
   - テストへの影響

### Phase 3: プラン作成
**目標**: 実行可能な詳細プランを文書化する

プランファイルには以下を含める：

```
## 概要
[1-2文でタスクの要約]

## 変更対象ファイル
- `path/to/file1.ts` - [変更内容の簡潔な説明]
- `path/to/file2.ts` - [変更内容の簡潔な説明]

## 実装ステップ
1. [具体的なステップ]
2. [具体的なステップ]
3. ...

## 確認事項
- [ ] [実装前に確認すべきこと]
- [ ] [テスト方法]
```

### Phase 4: 承認確認
**目標**: ユーザーの承認を得る

- プランの要約を提示
- 懸念点や代替案があれば説明
- 「このプランで実装を開始してよいですか？」と確認

## 禁止事項
- プランなしでの実装開始
- ユーザー確認なしでの設計判断
- 調査不足のまま進行
- 時間見積もりの提示

## 終了条件
以下のいずれかでプランモードを終了：
1. ユーザーがプランを承認
2. ユーザーがキャンセルを指示

# 実装内容
$1