{
  "$id": "blocks",
  "type": "object",
  "isDefaultOpen": true,
  "defineInterface": [
      {
          "interfaceName": "IMachineParam",
          "properties": {
              "inputSlotCount": {
                  "type": "integer"
              },
              "outputSlotCount": {
                  "type": "integer"
              }
          }
      },
      {
          "interfaceName": "IChestParam",
          "properties": {
              "itemSlotCount": {
                  "type": "integer"
              }
          }
      }
  ],
  "properties": {
    "data": {
      "type": "array",
      "overrideCodeGeneratePropertyName": "BlockMasterElement",
      "items": {
        "type": "object",
        "properties": {
          "blockGuid": {
            "type": "string",
            "format": "uuid",
            "autoGenerated": true
          },
          "name": {
            "type": "string"
          },
          "blockType": {
            "type": "string",
            "enum": [
              "Block",
              "BeltConveyor",
              "Chest",
              "ElectricMachine",
              "ElectricPole",
              "ElectricGenerator",
              "ElectricMiner",
              "Gear",
              "Shaft",
              "GearMachine",
              "SimpleGearGenerator",
              "GearBeltConveyor",
              "GearMiner",
              "GearMapObjectMiner",
              "ItemShooter",
              "CraftChainerTransporter",
              "CraftChainerCrafter",
              "CraftChainerProviderChest",
              "CraftChainerMainComputer",
              "TrainRail",
              "TrainStation",
              "TrainCargoPlatform",
              "FluidPipe"
            ]
          },
          "itemGuid": {
            "type": "string",
            "format": "uuid",
            "foreignKey": "items:itemGuid:name"
          },
          "blockSize": {
            "type": "array",
            "pattern": "@vector3Int",
            "items": {
              "type": "integer"
            },
            "default": [
              1,
              1,
              1
            ]
          },
          "blockPrefabAddressablesPath": {
            "type": "string",
            "optional": true
          },
          "blockUIAddressablesPath": {
            "type": "string",
            "optional": true
          },
          "blockParam": {
            "oneOf": [
              {
                "if": {
                  "properties": {
                    "blockType": {
                      "const": "Block"
                    }
                  }
                },
                "then": {
                  "type": "object",
                  "properties": {}
                }
              },
              {
                "if": {
                  "properties": {
                    "blockType": {
                      "const": "BeltConveyor"
                    }
                  }
                },
                "then": {
                  "type": "object",
                  "properties": {
                    "beltConveyorItemCount": {
                      "type": "integer",
                      "default": 1
                    },
                    "timeOfItemEnterToExit": {
                      "type": "number",
                      "default": 1
                    },
                    "slopeType": {
                      "type": "string",
                      "enum": [
                        "Straight",
                        "Up",
                        "Down"
                      ]
                    },
                    "inventoryConnectors": {
                      "$ref": "inventoryConnects"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "blockType": {
                      "const": "Chest"
                    }
                  }
                },
                "then": {
                  "type": "object",

                  "implementationInterface": [
                    "IChestParam"
                  ],

                  "properties": {
                    "itemSlotCount": {"type": "integer", "default": 5},
                    "inventoryConnectors": {
                      "$ref": "inventoryConnects"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "blockType": {
                      "const": "ElectricMachine"
                    }
                  }
                },
                "then": {
                  "implementationInterface": [
                    "IMachineParam"
                  ],
                  "type": "object",
                  "properties": {
                    "inputSlotCount": {
                      "type": "integer",
                      "default": 1
                    },
                    "outputSlotCount": {
                      "type": "integer",
                      "default": 1
                    },
                    "requiredPower": {
                      "type": "number",
                      "default": 5
                    },
                    "inventoryConnectors": {
                      "$ref": "inventoryConnects"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "blockType": {
                      "const": "ElectricPole"
                    }
                  }
                },
                "then": {
                  "type": "object",
                  "properties": {
                    "poleConnectionRange": {
                      "type": "integer",
                      "default": 5
                    },
                    "machineConnectionRange": {
                      "type": "integer",
                      "default": 5
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "blockType": {
                      "const": "ElectricGenerator"
                    }
                  }
                },
                "then": {
                  "type": "object",
                  "properties": {
                    "fuelItemSlotCount": {
                      "type": "integer",
                      "default": 3
                    },
                    "isInfinityPower": {
                      "type": "boolean",
                      "default": false
                    },
                    "infinityPower": {
                      "type": "integer",
                      "default": 0
                    },
                    "fuelItems": {
                      "type": "array",
                      "optional": true,
                      "items": {
                        "type": "object",
                        "properties": {
                          "itemGuid": {
                            "type": "string",
                            "format": "uuid",
                            "foreignKey": "items:itemGuid:name"
                          },
                          "time": {
                            "type": "number",
                            "default": 1
                          },
                          "power": {
                            "type": "number",
                            "default": 10
                          }
                        }
                      }
                    },
                    "inventoryConnectors": {
                      "$ref": "inventoryConnects"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "blockType": {
                      "const": "ElectricMiner"
                    }
                  }
                },
                "then": {
                  "type": "object",
                  "properties": {
                    "requiredPower": {
                      "type": "number",
                      "default": 5
                    },
                    "outputItemSlotCount": {
                      "type": "integer",
                      "default": 3
                    },
                    "mineSettings": {
                      "$ref": "mineSettings"
                    },
                    "inventoryConnectors": {
                      "$ref": "inventoryConnects"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "blockType": {
                      "const": "Gear"
                    }
                  }
                },
                "then": {
                  "type": "object",
                  "properties": {
                    "teethCount": {
                      "type": "integer",
                      "default": 10
                    },
                    "requireTorque": {
                      "type": "number",
                      "default": 1
                    },
                    "gear": {
                      "$ref": "gear"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "blockType": {
                      "const": "Shaft"
                    }
                  }
                },
                "then": {
                  "type": "object",
                  "properties": {
                    "requireTorque": {
                      "type": "number",
                      "default": 1
                    },
                    "gear": {
                      "$ref": "gear"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "blockType": {
                      "const": "GearMachine"
                    }
                  }
                },
                "then": {
                  "implementationInterface": [
                    "IMachineParam"
                  ],
                  "type": "object",
                  "properties": {
                    "inputSlotCount": {
                      "type": "integer",
                      "default": 1
                    },
                    "outputSlotCount": {
                      "type": "integer",
                      "default": 1
                    },
                    "teethCount": {
                      "type": "integer",
                      "default": 10
                    },
                    "requireTorque": {
                      "type": "number",
                      "default": 1
                    },
                    "requiredRpm": {
                      "type": "number",
                      "default": 5
                    },
                    "inventoryConnectors": {
                      "$ref": "inventoryConnects"
                    },
                    "gear": {
                      "$ref": "gear"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "blockType": {
                      "const": "SimpleGearGenerator"
                    }
                  }
                },
                "then": {
                  "type": "object",
                  "properties": {
                    "teethCount": {
                      "type": "integer",
                      "default": 10
                    },
                    "generateRpm": {
                      "type": "number",
                      "default": 5
                    },
                    "generateTorque": {
                      "type": "number",
                      "default": 1
                    },
                    "requireTorque": {
                      "type": "number",
                      "default": 1
                    },
                    "gear": {
                      "$ref": "gear"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "blockType": {
                      "const": "GearBeltConveyor"
                    }
                  }
                },
                "then": {
                  "type": "object",
                  "properties": {
                    "beltConveyorItemCount": {
                      "type": "integer",
                      "default": 4
                    },
                    "beltConveyorSpeed": {
                      "type": "number",
                      "default": 2
                    },
                    "requireTorque": {
                      "type": "number",
                      "default": 2
                    },
                    "slopeType": {
                      "type": "string",
                      "enum": [
                        "Straight",
                        "Up",
                        "Down"
                      ]
                    },
                    "inventoryConnectors": {
                      "$ref": "inventoryConnects"
                    },
                    "gear": {
                      "$ref": "gear"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "blockType": {
                      "const": "ItemShooter"
                    }
                  }
                },
                "then": {
                  "type": "object",
                  "properties": {
                    "inventoryItemNum": {
                      "type": "integer",
                      "default": 4
                    },
                    "initialShootSpeed": {
                      "type": "number",
                      "default": 3
                    },
                    "itemShootSpeed": {
                      "type": "number",
                      "default": 2
                    },
                    "acceleration": {
                      "type": "number",
                      "default": 1
                    },
                    "slopeType": {
                      "type": "string",
                      "enum": [
                        "Straight",
                        "Up",
                        "Down"
                      ]
                    },
                    "inventoryConnectors": {
                      "$ref": "inventoryConnects"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "blockType": {
                      "const": "GearMiner"
                    }
                  }
                },
                "then": {
                  "type": "object",
                  "properties": {
                    "teethCount": {
                      "type": "integer",
                      "default": 10
                    },
                    "requireTorque": {
                      "type": "number",
                      "default": 1
                    },
                    "requiredRpm": {
                      "type": "number",
                      "default": 5
                    },
                    "outputItemSlotCount": {
                      "type": "integer",
                      "default": 3
                    },
                    "mineSettings": {
                      "$ref": "mineSettings"
                    },
                    "inventoryConnectors": {
                      "$ref": "inventoryConnects"
                    },
                    "gear": {
                      "$ref": "gear"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "blockType": {
                      "const": "GearMapObjectMiner"
                    }
                  }
                },
                "then": {
                  "type": "object",

                  "implementationInterface": [
                    "IChestParam"
                  ],

                  "properties": {
                    "teethCount": {"type": "integer", "default": 10},
                    "requireTorque": {"type": "number", "default": 1},
                    "requiredRpm": {"type": "number", "default": 5},
                    
                    "itemSlotCount": {"type": "integer", "default": 3},

                    "miningAreaRange": {
                      "type": "array",
                      "pattern": "@vector3Int",
                      "items": {
                        "type": "integer"
                      }
                    },
                    "miningAreaOffset": {
                      "type": "array",
                      "pattern": "@vector3Int",
                      "items": {
                        "type": "integer"
                      }
                    },
                    "mapObjectMineSettings": {
                      "$ref": "mapObjectMineSettings"
                    },
                    "inventoryConnectors": {
                      "$ref": "inventoryConnects"
                    },
                    "gear": {
                      "$ref": "gear"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "blockType": {
                      "const": "CraftChainerTransporter"
                    }
                  }
                },
                "then": {
                  "type": "object",
                  "properties": {
                    "transporterConveyorItemCount": {
                      "type": "integer",
                      "default": 1
                    },
                    "timeOfItemEnterToExit": {
                      "type": "number",
                      "default": 1
                    },
                    "slopeType": {
                      "type": "string",
                      "enum": [
                        "Straight",
                        "Up",
                        "Down"
                      ]
                    },
                    "inventoryConnectors": {
                      "$ref": "inventoryConnects"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "blockType": {
                      "const": "CraftChainerCrafter"
                    }
                  }
                },
                "then": {
                  "type": "object",
                  "properties": {
                    "itemSlotCount": {
                      "type": "integer",
                      "default": 5
                    },
                    "inventoryConnectors": {
                      "$ref": "inventoryConnects"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "blockType": {
                      "const": "CraftChainerProviderChest"
                    }
                  }
                },
                "then": {
                  "type": "object",

                  "implementationInterface": [
                    "IChestParam"
                  ],

                  "properties": {
                    "itemSlotCount": {
                      "type": "integer",
                      "default": 5
                    },
                    "inventoryConnectors": {
                      "$ref": "inventoryConnects"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "blockType": {
                      "const": "CraftChainerMainComputer"
                    }
                  }
                },
                "then": {
                  "type": "object",
                  
                  "implementationInterface": [
                    "IChestParam"
                  ],

                  "properties": {
                    "itemSlotCount": {
                      "type": "integer",
                      "default": 5
                    },
                    "inventoryConnectors": {
                      "$ref": "inventoryConnects"
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "blockType": {
                      "const": "TrainRail"
                    }
                  }
                },
                "then": {
                  "type": "object",
                  "properties": {}
                }
              },
              {
                "if": {
                  "properties": {
                    "blockType": {
                      "const": "TrainStation"
                    }
                  }
                },
                "then": {
                  "type": "object",
                  "properties": {
                    "stationDistance": {
                      "type": "integer",
                      "default": 5
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "blockType": {
                      "const": "TrainCargoPlatform"
                    }
                  }
                },
                "then": {
                  "type": "object",
                  "properties": {
                    "platformDistance": {
                      "type": "integer",
                      "default": 5
                    },
                    "inputSlotCount": {
                      "type": "integer",
                      "default": 10
                    },
                    "outputSlotCount": {
                      "type": "integer",
                      "default": 10
                    },
                    "loadingSpeed": {
                      "type": "number",
                      "default": 20
                    }
                  }
                }
              },
              {
                "if": {
                  "properties": {
                    "blockType": {
                      "const": "FluidPipe"
                    }
                  }
                },
                "then": {
                  "type": "object",
                  "properties": {
                    "fluidInventoryConnectors": {
                      "$ref": "fluidInventoryConnects"
                    },
                    "capacity": {
                      "type": "number",
                      "default": 100
                    }
                  }
                }
              }
            ]
          },
          "overrideVerticalBlock": {
            "type": "object",
            "optional": true,
            "properties": {
              "upBlockGuid": {
                "type": "string",
                "format": "uuid",
                "foreignKey": "blocks:blockGuid:name"
              },
              "horizontalBlockGuid": {
                "type": "string",
                "format": "uuid",
                "foreignKey": "blocks:blockGuid:name"
              },
              "downBlockGuid": {
                "type": "string",
                "format": "uuid",
                "foreignKey": "blocks:blockGuid:name"
              }
            }
          }
        }
      }
    }
  }
}
